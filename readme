

# Idol SL Project

## プロジェクト概要

- **目的**
-アイドルマスターの立ち絵をASCIIアート（AA）に変換し、ターミナル上で右から左にスクロールさせるツールを作成  
- **特徴**
- PNG画像を読み込んでAAに変換
- 透過部分は空白として扱う

---

## ディレクトリ構成



idol_sl_project/
├── run.py # メインプログラム
├── images/
│ └── idol.png # AAに変換したいPNG画像（透過推奨）
├── .gitignore
└── bin/
└── ibukichi # コマンド実行用スクリプト


---

## 環境構築

1. **Python 3 と Pillow をインストール**
   ```bash
   sudo apt update
   sudo apt install python3 python3-pip
   pip3 install pillow


Git をインストール

sudo apt install git


~/bin を作成（コマンド格納用）

mkdir -p ~/bin

コード解説
run.py
#!/usr/bin/env python3
import os
import sys
from PIL import Image
import time
import shutil

# === 1. スクリプトのあるフォルダを基準にパスを設定 ===
base_dir = os.path.dirname(os.path.abspath(__file__))
image_filename = "idol.png"  # 変換する画像名
image_path = os.path.join(base_dir, "images", image_filename)

width, height = 50, 20  # AAに変換するサイズ

# === 2. 画像が存在するか確認 ===
if not os.path.exists(image_path):
    print(f"Error: 画像が見つかりません -> {image_path}")
    sys.exit(1)

# === 3. 画像を読み込み、RGBAで透過も扱えるように変換 ===
img = Image.open(image_path).convert("RGBA").resize((width, height))
pixels = img.getdata()

# === 4. 明るさに応じて使う文字を選択 ===
ascii_chars = "@%#*+=-:. "  # 暗い順に文字が濃い

aa_lines = []
for y in range(height):
    line = ""
    for x in range(width):
        r, g, b, a = pixels[y * width + x]
        if a < 128:
            # 透過部分は空白にする
            line += " "
        else:
            # RGBの平均から明るさを算出
            brightness = int((r + g + b) / 3)
            char_index = brightness * (len(ascii_chars)-1) // 255
            line += ascii_chars[char_index]
    aa_lines.append(line)

# === 5. ターミナル幅を取得し、右から左に流す ===
term_width = shutil.get_terminal_size((80, 20)).columns
for _ in range(term_width + width):
    for line in aa_lines:
        print(line.rjust(term_width))   # 右寄せしてスクロール演出
    time.sleep(0.05)
    # カーソルをAAの行数だけ戻す（上書き表示するため）
    print("\033[{}A".format(len(aa_lines)))

コードのポイント

base_dir
run.py があるフォルダを基準に画像パスを組み立てるので、どこから実行しても動く

RGBA変換
Image.open(...).convert("RGBA") により透過を判定し、空白に変換

AA変換ロジック
明るさを0〜255の範囲で評価 → ascii_chars のインデックスに変換

スクロール表示
rjust()で右寄せ → \033[<n>Aでカーソルを戻し、アニメーションのように表示

ibukichi コマンドスクリプト

~/bin/ibukichi を作成

nano ~/bin/ibukichi


内容：

#!/bin/bash
python3 /mnt/c/Users/yamat/Projects/idol_sl_project/run.py


実行権限を付与：

chmod +x ~/bin/ibukichi


PATHを通していない場合は：

echo 'export PATH=$HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc


これで以下で起動可能：

ibukichi

GitHub へのアップロード

リポジトリを初期化

cd /mnt/c/Users/yamat/Projects/idol_sl_project
git init


.gitignore を作成

__pycache__/
*.pyc
*.pyo
*.pyd
.env
.DS_Store


ファイルを追加してコミット

git add .
git commit -m "初回コミット: run.pyとimages追加"


GitHub リポジトリを登録してプッシュ

git remote add origin https://github.com/yamagumo/idol-sl.git
git branch -M main
git push -u origin main


※ GitHubのPersonal Access Token(PAT)が必要

実行方法
ibukichi


どのディレクトリでも起動可能

アイドル立ち絵がAA化されて右から左にスクロール表示される

今後の改善案

複数画像をランダムに表示

スクロール速度をコマンド引数で変更可能に

文字セットの変更（例: #だけで作る）

ターミナルサイズに自動フィットさせる


---

このMarkdownをそのまま `README.md` としてプロジェクトに追加すれば、  
**他の人が見ても / 後日自分が見ても** 再現できます。  

もっと見やすい **コード図解付きのバージョン** にすることも可能ですが、まずはこの形でいきますか？

あなた:
おねがい
ChatGPT:

わかりました！先ほどの内容に 詳しいコード解説と図解を追加した、さらに丁寧なREADME をMarkdownでまとめます。
（そのまま README.md として使えます）

# Idol SL Project

## プロジェクト概要

- **目的**  
  アイドルマスターの立ち絵を ASCII アート（AA）に変換し、ターミナル上で「SLコマンド風」に右から左へ流す。
- **特徴**
  - PNG 画像を AA に変換
  - 透過部分は空白として扱う
  - 右から左に流れるアニメーション表示
  - `ibukichi` コマンドでどこからでも起動可能

---

## ディレクトリ構成



idol_sl_project/
├── run.py # メインプログラム
├── images/
│ └── idol.png # AAに変換したいPNG画像（透過推奨）
├── .gitignore
└── bin/
└── ibukichi # コマンド実行用スクリプト


---

## 環境構築手順

### 1. Python と Pillow をインストール
```bash
sudo apt update
sudo apt install python3 python3-pip
pip3 install pillow

2. Git をインストール
sudo apt install git

3. コマンド実行用のディレクトリを作成
mkdir -p ~/bin

コード解説
run.py
#!/usr/bin/env python3
import os
import sys
from PIL import Image
import time
import shutil

# === 1. スクリプトのあるフォルダを基準にパスを設定 ===
base_dir = os.path.dirname(os.path.abspath(__file__))
image_filename = "idol.png"  # 変換したい画像名
image_path = os.path.join(base_dir, "images", image_filename)

width, height = 50, 20  # AA化する画像のサイズ

# === 2. 画像が存在するか確認 ===
if not os.path.exists(image_path):
    print(f"Error: 画像が見つかりません -> {image_path}")
    sys.exit(1)

# === 3. 画像を読み込んでRGBAに変換し、透過も扱えるようにする ===
img = Image.open(image_path).convert("RGBA").resize((width, height))
pixels = img.getdata()

# === 4. 明るさに応じて使う文字を決める ===
ascii_chars = "@%#*+=-:. "  # 暗いほど濃い文字を使用

aa_lines = []
for y in range(height):
    line = ""
    for x in range(width):
        r, g, b, a = pixels[y * width + x]
        if a < 128:
            # 透過部分は空白
            line += " "
        else:
            # RGBの平均から明るさを算出
            brightness = int((r + g + b) / 3)
            char_index = brightness * (len(ascii_chars) - 1) // 255
            line += ascii_chars[char_index]
    aa_lines.append(line)

# === 5. ターミナル幅を取得して右から左に流す ===
term_width = shutil.get_terminal_size((80, 20)).columns
for _ in range(term_width + width):
    for line in aa_lines:
        print(line.rjust(term_width))   # 右寄せでスクロール演出
    time.sleep(0.05)
    # カーソルをAAの行数だけ戻す（上書き表示するため）
    print("\033[{}A".format(len(aa_lines)))

コードの流れを図解
[ idol.png 読み込み ]
        ↓
  RGBAに変換 (透過対応)
        ↓
  明るさを計算 → ASCII文字に変換
        ↓
   ターミナル幅に合わせて右寄せ
        ↓
   カーソルを戻しながら上書き表示
        ↓
  右から左に流れるように見える！

ibukichi コマンドスクリプト

~/bin/ibukichi を作成し、以下を記述：

#!/bin/bash
python3 /mnt/c/Users/yamat/Projects/idol_sl_project/run.py


実行権限を付与：

chmod +x ~/bin/ibukichi


PATHが通っていない場合は：

echo 'export PATH=$HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc


これで以下で起動可能：

ibukichi

GitHub へのアップロード手順

リポジトリ初期化

cd /mnt/c/Users/yamat/Projects/idol_sl_project
git init


.gitignore を作成

__pycache__/
*.pyc
*.pyo
*.pyd
.env
.DS_Store


コミットしてプッシュ

git add .
git commit -m "初回コミット: run.pyとimages追加"
git remote add origin https://github.com/yamagumo/idol-sl.git
git branch -M main
git push -u origin main


※ GitHub の Personal Access Token を使用

実行方法
ibukichi


どのディレクトリでも起動可能

ターミナル上にアイドル立ち絵のAAが右から左にスクロール